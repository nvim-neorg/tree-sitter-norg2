================================================================================
Basic Links
================================================================================
{* Heading level 1}
{** Heading level 2}
{*** Heading level 3}
{**** Heading level 4}
{***** Heading level 5}
{****** Heading level 6}
{******* Heading level 7 and higher falls back to 6}
{? Wiki}
{# Generic}
{$ Definition}
{^ Footnote}
{:norg_file:}
{:norg_file:* Heading level 1}
{:norg_file:** Heading level 2}
{:norg_file:*** Heading level 3}
{:norg_file:**** Heading level 4}
{:norg_file:***** Heading level 5}
{:norg_file:****** Heading level 6}
{:norg_file:******* Heading level 7 and higher falls back to 6}
{:norg_file:# Generic}
{:norg_file:$ Definition}
{:norg_file:^ Footnote}
{:norg_file:100}
{https://github.com/}
{100}
{file:///dev/null}
{/ external_file.txt}
{@ Tue 3rd November 2022 8:30 GMT}
{:norg_file:/ external_file.txt}
{:norg_file:@ Tue 3rd November 2022 8:30 GMT}
{:norg_file:https://github.com/}
--------------------------------------------------------------------------------

(document
  (paragraph
    (paragraph_segment
      (link
        (link_location
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (wiki)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (generic)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (definition)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (footnote)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (generic)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (definition)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (footnote)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (line_number))))
    (paragraph_segment
      (link
        (link_location
          target: (url))))
    (paragraph_segment
      (link
        (link_location
          target: (line_number))))
    (paragraph_segment
      (link
        (link_location
          target: (url))))
    (paragraph_segment
      (link
        (link_location
          target: (external_file)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (timestamp)
          (weak_paragraph
            (paragraph_segment
              (ERROR
                (link_modifier)))))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (external_file)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (timestamp)
          (weak_paragraph
            (paragraph_segment
              (ERROR
                (link_modifier)))))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (url))))))

================================================================================
Links with text
================================================================================
{* Heading level 1}[custom text]
{** Heading level 2}[custom text]
{*** Heading level 3}[custom text]
{**** Heading level 4}[custom text]
{***** Heading level 5}[custom text]
{****** Heading level 6}[custom text]
{******* Heading level 7 and higher falls back to 6}[custom text]
{? Wiki}[custom text]
{# Generic}[custom text]
{$ Definition}[custom text]
{^ Footnote}[custom text]
{:norg_file:}[custom text]
{:norg_file:* Heading level 1}[custom text]
{:norg_file:** Heading level 2}[custom text]
{:norg_file:*** Heading level 3}[custom text]
{:norg_file:**** Heading level 4}[custom text]
{:norg_file:***** Heading level 5}[custom text]
{:norg_file:****** Heading level 6}[custom text]
{:norg_file:******* Heading level 7 and higher falls back to 6}[custom text]
{:norg_file:# Generic}[custom text]
{:norg_file:$ Definition}[custom text]
{:norg_file:^ Footnote}[custom text]
{:norg_file:100}[custom text]
{https://github.com/}[custom text]
{100}[custom text]
{file:///dev/null}[custom text]
{/ external_file.txt}[custom text]
{@ Tue 3rd November 2022 8:30 GMT}[custom text]
{:norg_file:/ external_file.txt}[custom text]
{:norg_file:@ Tue 3rd November 2022 8:30 GMT}
{:norg_file:https://github.com/}[custom text]
--------------------------------------------------------------------------------

(document
  (paragraph
    (paragraph_segment
      (link
        (link_location
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (wiki)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (generic)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (definition)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (footnote)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (generic)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (definition)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (footnote)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (line_number))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (url))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (line_number))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (url))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (external_file)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          target: (timestamp)
          (weak_paragraph
            (paragraph_segment
              (ERROR
                (link_modifier)))))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (external_file)
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (timestamp)
          (weak_paragraph
            (paragraph_segment
              (ERROR
                (link_modifier)))))))
    (paragraph_segment
      (link
        (link_location
          (filepath)
          target: (url))
        (link_description
          (weak_paragraph
            (paragraph_segment)))))))

================================================================================
Anchors
================================================================================
[heading anchor]
[wiki anchor]
[generic anchor]
[definition anchor]
[footnote anchor]
[norg file anchor]
[line number anchor]
[external heading anchor]
[external generic anchor]
[external definition anchor]
[external footnote anchor]
[non-norg file anchor]
[url anchor]
[file anchor]
[invalid external with file anchor]
[invalid url with file anchor]

[heading anchor]{* Heading level 1}
[heading anchor]{** Heading level 2}
[heading anchor]{*** Heading level 3}
[heading anchor]{**** Heading level 4}
[heading anchor]{***** Heading level 5}
[heading anchor]{****** Heading level 6}
[heading anchor]{******* Heading level 7 and higher falls back to 6}
[wiki anchor]{? Wiki}
[generic anchor]{# Generic}
[definition anchor]{$ Definition}
[footnote anchor]{^ Footnote}
[norg file anchor]{:norg_file:}
[line number anchor]{123}
[line number anchor]{:norg_file:123}
[external heading anchor]{:norg_file:* Heading level 1}
[external heading anchor]{:norg_file:** Heading level 2}
[external heading anchor]{:norg_file:*** Heading level 3}
[external heading anchor]{:norg_file:**** Heading level 4}
[external heading anchor]{:norg_file:***** Heading level 5}
[external heading anchor]{:norg_file:****** Heading level 6}
[external heading anchor]{:norg_file:******* Heading level 7 and higher falls back to 6}
[external generic anchor]{:norg_file:# Generic}
[external definition anchor]{:norg_file:$ Definition}
[external footnote anchor]{:norg_file:^ Footnote}
[non-norg file anchor]{/ external_file.txt}
[timestamp]{@ Tue 3rd November 2022 8:30 GMT}
[url anchor]{https://github.com/}
[file anchor]{file:///dev/null}
[invalid external with file anchor]{:file:/ external_file.txt}
[invalid timestamp with file anchor]{:file:@ Tue 3rd November 2022 8:30 GMT}
[invalid url with file anchor]{:file:https://github.com/}
--------------------------------------------------------------------------------

(document
  (paragraph
    (paragraph_segment
      (anchor_declaration
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_declaration
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_declaration
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_declaration
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_declaration
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_declaration
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_declaration
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_declaration
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_declaration
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_declaration
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_declaration
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_declaration
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_declaration
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_declaration
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_declaration
        (link_description
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_declaration
        (link_description
          (weak_paragraph
            (paragraph_segment))))))
  (paragraph
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          target: (wiki)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          target: (generic)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          target: (definition)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          target: (footnote)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          (filepath))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          target: (line_number))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          (filepath)
          target: (line_number))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          (filepath)
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          (filepath)
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          (filepath)
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          (filepath)
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          (filepath)
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          (filepath)
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          (filepath)
          target: (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          (filepath)
          target: (generic)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          (filepath)
          target: (definition)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          (filepath)
          target: (footnote)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          target: (external_file)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          target: (timestamp)
          (weak_paragraph
            (paragraph_segment
              (ERROR
                (link_modifier)))))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          target: (url))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          target: (url))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          (filepath)
          target: (external_file)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          (filepath)
          target: (timestamp)
          (weak_paragraph
            (paragraph_segment
              (ERROR
                (link_modifier)))))))
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          (filepath)
          target: (url))))))

================================================================================
Verbatim links
================================================================================
`{* not a link}`
`{:also_not_a_link:}`
`{:$again_not_a_link:}`
`{* not a link}[not a description]`
`[not an anchor]`
`[not an anchor]{* not a link}`
${* not a link}$
${:also_not_a_link:}$
${:$again_not_a_link:}$
${* not a link}[not a description]$
$[not an anchor]$
$[not an anchor]{* not a link}$
&{* not a link}&
&{:also_not_a_link:}&
&{:$again_not_a_link:}&
&{* not a link}[not a description]&
&[not an anchor]&
&[not an anchor]{* not a link}&
--------------------------------------------------------------------------------

(document
  (paragraph
    (paragraph_segment
      (verbatim))
    (paragraph_segment
      (verbatim))
    (paragraph_segment
      (verbatim))
    (paragraph_segment
      (verbatim))
    (paragraph_segment
      (verbatim))
    (paragraph_segment
      (verbatim))
    (paragraph_segment
      (inline_math))
    (paragraph_segment
      (inline_math))
    (paragraph_segment
      (inline_math))
    (paragraph_segment
      (inline_math))
    (paragraph_segment
      (inline_math))
    (paragraph_segment
      (inline_math))
    (paragraph_segment
      (inline_macro))
    (paragraph_segment
      (inline_macro))
    (paragraph_segment
      (inline_macro))
    (paragraph_segment
      (inline_macro))
    (paragraph_segment
      (inline_macro))
    (paragraph_segment
      (inline_macro))))

================================================================================
Anchors inside unordered list. Regression test against #28
================================================================================
- [anchor]

[anchor]{https://example.com/}
--------------------------------------------------------------------------------

(document
  (list
    (unordered_list_item1
      (prefix)
      (paragraph
        (paragraph_segment
          (anchor_declaration
            (link_description
              (weak_paragraph
                (paragraph_segment))))))))
  (paragraph
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          (url))))))

================================================================================
Whitespace rules of linkables
================================================================================
This is [ not a link ] description.
This is { not a link } location.
--------------------------------------------------------------------------------

(document
  (ERROR
    (ERROR
      (undone))
    (weak_paragraph
      (paragraph_segment)
      (paragraph_segment
        (link
          (link_location
            (url)))))))

================================================================================
Anchor with custom description
================================================================================
[heading anchor][with custom description]

[heading anchor]{* Heading level 1}
--------------------------------------------------------------------------------

(document
  (paragraph
    (paragraph_segment
      (anchor_declaration
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_description
          (weak_paragraph
            (paragraph_segment))))))
  (paragraph
    (paragraph_segment
      (anchor_definition
        (link_description
          (weak_paragraph
            (paragraph_segment)))
        (link_location
          (heading)
          (weak_paragraph
            (paragraph_segment)))))))

================================================================================
Scoped links
================================================================================
{* Heading level 1 : ** heading level 2}
{$ Definition 1 : $ Definition 2}
{^ Footnote : url} - semantically invalid, but syntactically correct
--------------------------------------------------------------------------------

(document
  (paragraph
    (paragraph_segment
      (link
        (link_location
          (heading)
          (weak_paragraph
            (paragraph_segment))
          (scope)
          (heading)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (definition)
          (weak_paragraph
            (paragraph_segment))
          (scope)
          (definition)
          (weak_paragraph
            (paragraph_segment)))))
    (paragraph_segment
      (link
        (link_location
          (footnote)
          (weak_paragraph
            (paragraph_segment))
          (scope)
          (url))))))
